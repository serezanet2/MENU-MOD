local player = game:GetService("Players").LocalPlayer
local TweenService = game:GetService("TweenService")
local HttpService = game:GetService("HttpService")

-- Конфигурация
local VALID_KEYS = {
    ["GITMODER-1234"] = true,  -- Тестовый ключ
    ["GIT-ACCESS-5678"] = true -- Основной ключ
}

-- Основной скрипт (встроенный)
local MAIN_SCRIPT = [[
    print("Основной скрипт успешно загружен!")
    -- Ваш основной код здесь
    -- Пример:
    local player = game:GetService("Players").LocalPlayer
    
    local function notify(msg)
        game:GetService("StarterGui"):SetCore("SendNotification", {
            Title = "Gitmoder",
            Text = msg,
            Duration = 5
        })
    end
    
    notify("Система активирована!")
]]

-- Создаем интерфейс
local gui = Instance.new("ScreenGui")
gui.Name = "AuthGUI_"..tostring(math.random(1000,9999))
gui.Parent = game:GetService("CoreGui")
gui.DisplayOrder = 999999999
gui.IgnoreGuiInset = true
gui.ResetOnSpawn = false

local mainFrame = Instance.new("Frame")
mainFrame.Size = UDim2.new(0, 500, 0, 300)
mainFrame.Position = UDim2.new(0.5, -250, 0.5, -150)
mainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
mainFrame.BorderSizePixel = 0
mainFrame.ClipsDescendants = true
mainFrame.Parent = gui

-- Градиентный фон
local gradient = Instance.new("UIGradient")
gradient.Color = ColorSequence.new({
    ColorSequenceKeypoint.new(0, Color3.fromRGB(40, 40, 40)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(80, 80, 80))
})
gradient.Rotation = 90
gradient.Parent = mainFrame

-- Текст заголовка
local title = Instance.new("TextLabel")
title.Size = UDim2.new(1, -40, 0, 50)
title.Position = UDim2.new(0, 20, 0.1, 0)
title.Text = "GITMODER АКТИВАЦИЯ"
title.TextColor3 = Color3.fromRGB(255, 255, 255)
title.TextScaled = true
title.BackgroundTransparency = 1
title.Font = Enum.Font.GothamBold
title.Parent = mainFrame

-- Поле ввода ключа
local textBox = Instance.new("TextBox")
textBox.Size = UDim2.new(0, 300, 0, 40)
textBox.Position = UDim2.new(0.5, -150, 0.4, -20)
textBox.PlaceholderText = "Введите ключ доступа..."
textBox.Text = ""
textBox.TextColor3 = Color3.fromRGB(255, 255, 255)
textBox.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
textBox.Parent = mainFrame

-- Кнопка активации
local submitBtn = Instance.new("TextButton")
submitBtn.Size = UDim2.new(0, 200, 0, 40)
submitBtn.Position = UDim2.new(0.5, -100, 0.6, 0)
submitBtn.Text = "АКТИВИРОВАТЬ"
submitBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
submitBtn.BackgroundColor3 = Color3.fromRGB(0, 120, 255)
submitBtn.Parent = mainFrame

-- Статус
local statusLabel = Instance.new("TextLabel")
statusLabel.Size = UDim2.new(1, -40, 0, 30)
statusLabel.Position = UDim2.new(0, 20, 0.8, 0)
statusLabel.Text = ""
statusLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
statusLabel.BackgroundTransparency = 1
statusLabel.Parent = mainFrame

-- Проверка ключа
local function validateKey(key)
    key = string.gsub(tostring(key or ""), "%s+", "")
    return VALID_KEYS[key] == true
end

-- Загрузка основного скрипта
local function loadMainScript()
    local success, err = pcall(loadstring, MAIN_SCRIPT)
    if not success then
        statusLabel.Text = "Ошибка загрузки!"
        statusLabel.TextColor3 = Color3.fromRGB(255, 50, 50)
        warn("Ошибка загрузки скрипта:", err)
        return false
    end
    return true
end

-- Обработчик кнопки
submitBtn.MouseButton1Click:Connect(function()
    submitBtn.Text = "ПРОВЕРКА..."
    statusLabel.Text = ""
    
    local key = textBox.Text
    if validateKey(key) then
        statusLabel.Text = "Ключ принят!"
        statusLabel.TextColor3 = Color3.fromRGB(0, 255, 0)
        
        task.wait(1)
        if loadMainScript() then
            gui:Destroy()
        end
    else
        statusLabel.Text = "НЕВЕРНЫЙ КЛЮЧ!"
        statusLabel.TextColor3 = Color3.fromRGB(255, 50, 50)
        task.wait(1.5)
        statusLabel.Text = ""
        submitBtn.Text = "АКТИВИРОВАТЬ"
    end
end)

-- Анимация появления
mainFrame.Position = UDim2.new(0.5, -250, 0, -300)
TweenService:Create(mainFrame, TweenInfo.new(1, Enum.EasingStyle.Bounce), {
    Position = UDim2.new(0.5, -250, 0.5, -150)
}):Play()
