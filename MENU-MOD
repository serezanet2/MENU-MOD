local player = game:GetService("Players").LocalPlayer
local TweenService = game:GetService("TweenService")
local HttpService = game:GetService("HttpService")

-- Конфигурация
local API_URL = "https://serezanet2.github.io/GitUnlock/Gitmoder/?check="
local MAIN_SCRIPT_URL = "https://raw.githubusercontent.com/serezanet2/serezanet2-GIT-SALLI/refs/heads/main/script"
local PROFILE_LINK = "https://playerok.com/profile/Serezanet2/products"

-- Создание GUI (оригинальный дизайн)
local gui = Instance.new("ScreenGui")
gui.Name = "GitmoderAuth"
gui.Parent = game:GetService("CoreGui")
gui.ResetOnSpawn = false

local mainFrame = Instance.new("Frame")
mainFrame.Size = UDim2.new(0, 400, 0, 250)
mainFrame.Position = UDim2.new(0.5, -200, 0.5, -125)
mainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 40)
mainFrame.BorderSizePixel = 0
mainFrame.Parent = gui

local title = Instance.new("TextLabel")
title.Text = "GITMODER AUTH"
title.Size = UDim2.new(1, 0, 0, 40)
title.Position = UDim2.new(0, 0, 0, 10)
title.TextColor3 = Color3.fromRGB(200, 200, 255)
title.Font = Enum.Font.GothamBold
title.TextSize = 20
title.BackgroundTransparency = 1
title.Parent = mainFrame

local inputBox = Instance.new("TextBox")
inputBox.Size = UDim2.new(0.8, 0, 0, 40)
inputBox.Position = UDim2.new(0.1, 0, 0.4, -20)
inputBox.PlaceholderText = "Введите ключ доступа"
inputBox.Text = ""
inputBox.BackgroundColor3 = Color3.fromRGB(50, 50, 60)
inputBox.TextColor3 = Color3.fromRGB(255, 255, 255)
inputBox.Parent = mainFrame

local submitBtn = Instance.new("TextButton")
submitBtn.Size = UDim2.new(0.6, 0, 0, 35)
submitBtn.Position = UDim2.new(0.2, 0, 0.7, 0)
submitBtn.Text = "АКТИВИРОВАТЬ"
submitBtn.BackgroundColor3 = Color3.fromRGB(80, 120, 200)
submitBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
submitBtn.Font = Enum.Font.GothamBold
submitBtn.Parent = mainFrame

local statusLabel = Instance.new("TextLabel")
statusLabel.Size = UDim2.new(0.8, 0, 0, 20)
statusLabel.Position = UDim2.new(0.1, 0, 0.85, 0)
statusLabel.Text = ""
statusLabel.TextColor3 = Color3.fromRGB(255, 100, 100)
statusLabel.Font = Enum.Font.Gotham
statusLabel.TextSize = 14
statusLabel.BackgroundTransparency = 1
statusLabel.Parent = mainFrame

-- Анимация появления
mainFrame.Position = UDim2.new(0.5, -200, 0, -300)
TweenService:Create(
    mainFrame,
    TweenInfo.new(1, Enum.EasingStyle.Back, Enum.EasingDirection.Out),
    {Position = UDim2.new(0.5, -200, 0.5, -125)}
):Play()

-- Функция проверки ключа
local function checkKey(key)
    local success, response = pcall(function()
        return HttpService:GetAsync(API_URL..key)
    end)
    
    if success then
        return response == '{"valid":true}'
    end
    return false
end

-- Обработчик активации
submitBtn.MouseButton1Click:Connect(function()
    local key = inputBox.Text
    if #key < 10 then
        statusLabel.Text = "Неверный формат ключа!"
        return
    end

    submitBtn.Text = "ПРОВЕРКА..."
    submitBtn.Active = false

    if checkKey(key) then
        statusLabel.Text = "Успешная авторизация!"
        statusLabel.TextColor3 = Color3.fromRGB(100, 255, 100)
        
        -- Загрузка основного скрипта
        local success, script = pcall(function()
            return HttpService:GetAsync(MAIN_SCRIPT_URL, true)
        end)
        
        if success then
            loadstring(script)()
            gui:Destroy()
        else
            statusLabel.Text = "Ошибка загрузки скрипта"
            submitBtn.Text = "АКТИВИРОВАТЬ"
            submitBtn.Active = true
        end
    else
        statusLabel.Text = "Неверный ключ доступа"
        statusLabel.TextColor3 = Color3.fromRGB(255, 100, 100)
        submitBtn.Text = "АКТИВИРОВАТЬ"
        submitBtn.Active = true
    end
end)

-- Копирование ссылки на профиль
local copyBtn = Instance.new("TextButton")
copyBtn.Size = UDim2.new(0.6, 0, 0, 25)
copyBtn.Position = UDim2.new(0.2, 0, 0.6, 0)
copyBtn.Text = "Купить ключ"
copyBtn.TextColor3 = Color3.fromRGB(200, 200, 255)
copyBtn.BackgroundTransparency = 1
copyBtn.Font = Enum.Font.Gotham
copyBtn.Parent = mainFrame

copyBtn.MouseButton1Click:Connect(function()
    setclipboard(PROFILE_LINK)
    statusLabel.Text = "Ссылка скопирована!"
    statusLabel.TextColor3 = Color3.fromRGB(200, 200, 255)
end)
